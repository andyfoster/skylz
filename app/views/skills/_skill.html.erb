<div id="<%= dom_id skill%>" class="<%= action_name != "show" ? "w-full md:w-[48%] lg:w-[30%] cursor-pointer" : "" %>">
  <% if action_name != "show" %>
  <div class="flex items-center flex-row flex-wrap justify-center w-full">
    <div class="focus:outline-none bg-white shadow w-full mb-3 border border-black hover:bg-indigo-100">
      <div id="card-content" class="p-6 relative">
      <% cache skill do %>
            <%= content_tag :span, "#{skill.total_reps}x", 
            class: "text-indigo-200 rounded-full
            bg-gradient-to-r from-indigo-500 to-indigo-900 flex items-center 
            justify-center h-10 w-10 p-8 absolute -top-2 -right-2" %>
      <% end %>
        <div class="flex items-center">
          <%# <img src="https://cdn.tuk.dev/assets/components/misc/doge-coin.png" alt="coin avatar" class="w-12 h-12 rounded-full" /> %>
          <div class="flex items-start justify-between w-full">
            <div class="w-full pr-8">
              <span><%= link_to skill.name, skill, class: "focus:outline-none text-xl font-medium leading-5 text-gray-800 hover:underline" %></span>

              <p class="focus:outline-none text-sm leading-normal pt-2 text-gray-500">
                <%=  !skill.activities.empty? ? "Last done: #{skill.activities.last.date.strftime("%a, %e %b %Y")}" : 'New Skill' %>
              </p>
              <p class="focus:outline-none text-sm leading-normal pt-2 text-gray-500">
                <%= "Last rated: #{skill.activities.last.rating}" unless skill.activities.empty? %>
              </p>
            </div>


          </div>
        </div>
        <div class="overflow-hidden" id="notes">
          <!--
          <p class="focus:outline-none text-sm pt-2 text-gray-600 whitespace-pre-wrap">
            <%= skill.notes %>
          </p>
  -->
          <div class="focus:outline-none mt-3" id="tags">
            <% if skill.tags.present? 
                            skill.tags.split(", ").each do |tag|%>
            <div class="text-xs inline-block
            mr-2 px-2 py-0.5 rounded-lg
            text-indigo-900 border border-indigo-900
            hover:text-white cursor-pointer
            hover:bg-gradient-to-r hover:from-indigo-500 hover:to-indigo-900">
              <%= tag %></div>
            <% end %>
            <% end %>
          </div>
        </div>
      </div>

      <div id="buttons" class="w-full text-xs border border-t border-t-indigo-700 
        rounded-b px-6 py-2 border-b border-gray-200 flex justify-between">
        <div class="">
          <%= link_to edit_skill_path(skill) do %>
          <span class="text-gray-500 hover:text-gray-900"><%= fa_icon "pencil" %> edit</span>
          <% end %>
        </div>
        <div class="">
          <%= link_to edit_skill_path(skill) do %>
          <span class="text-gray-500 hover:text-gray-900"><%= fa_icon "plus" %> add to list</span>
          <% end %>
        </div>
        <div class="">
          <%= link_to new_skill_activity_path(skill) do %>
          <span class="text-gray-500 hover:text-gray-900"><%= fa_icon "book" %> log</span>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <% else %>

  <%#
### ############################################################################
### INDIVIDUAL SKILL PAGE
### ############################################################################
#%>

  <div>
    <div class="relative">
      <%= link_to edit_skill_path(@skill) do %>
      <span class="text-indigo-500 hover:text-white absolute z-20 right-20"><%= fa_icon "pencil" %> Edit</span>
      <% end %>    
    </div>
  </div>

  <%= content_tag :h1, skill.name, class: "sloped relative text-6xl block font-bold py-3 text-center bg-gradient-to-r from-indigo-500 to-indigo-900 text-white" %>

  <% if skill.tags.present? %>
  <div
    class="rounded-b-lg bg-gradient-to-r from-indigo-500 to-indigo-900 w-full py-2 shadow-sm mx-auto text-white text-center text-sm"">
      <% skill.tags.split(", ").each do |tag|%>
          <%= content_tag :div, tag, class: "py-2 px-4 text-xs leading-3 inline" %>
      <% end %>
    </div>
  <% end %>


<!--
  <div class=" bg-gray-700 w-full py-2 shadow-sm mx-auto text-white text-center text-sm"">
    <%=  !skill.activities.empty? ? "Last practiced: #{(Date.today - @skill.activities.last.date).to_i} days ago" : '' %>

    Stats: Rolls 20x, Competition: 3x, Drills: 54x
  </div>
  <div class="bg-gray-500 w-full py-2 shadow-sm mx-auto mb-4 text-white text-center text-sm">
    <a href="#steps">Steps</a> |
    <a href="#media">Media</a> |
    <a href="#activity-log">Activity Log</a>
  </div>
  -->
  
  <% if skill.reason.present? %>
    <div class="mt-3">
      <h2 class="font-bold text-xl">Reason</h2>
      <%= content_tag :p, skill.reason, class: 'whitespace-pre-wrap' %>
      <br>
    </div>
  <% end %>

  <div class="mt-3">
    <h2 class="font-bold text-xl">Notes</h2>
    <%= content_tag :p, skill.notes, class: 'trix-content whitespace-pre-wrap' %>
    <br>
  </div>

  <div class="mt-3">
    <% if !skill.steps.blank? %>
    <h2 class="font-bold text-xl mb-3" id="steps">Steps</h2>
    <div id="steps" class="divide-y divide-solid bg-white p-2 pl-0 pt-0
    border-2 border-indigo-900">
      <% skill.steps.split("\n").reject(&:blank?).each_with_index do |step, index| %>
      <div class="step border-b-1 border-black flex items-center"
        onclick='this.style.color = "grey"; this.style.textDecoration = "line-through"'>
        <span class="text-white rounded-full bg-purple-gradient
          flex items-center justify-center h-10 w-10 mt-4 ml-4">
          <%= index +1 %>
        </span>
        <span class="text-2xl py-3 ml-4 w-5/6 leading-relaxed cursor-pointer"><%= step %></span>
      </div>
      <% end %>
    </div>
    <%# <% else %>
    <%# link_to 'No steps for this skill yet.', edit_skill_path(@skill), class: "text-center" %>
    <% end %>
  </div>





  <div class="mb-3 mt-5">
    <h2 class="font-bold text-xl mb-3 inline-block" id="activity-log">Activity Log (<%= skill.activities.count %>)</h2>
    <%= link_to 'Log A Session', new_skill_activity_path(skill), 
      class: "inline-flex items-center btn-primary float-right" %>
  </div>

  <div>
    <% skill.activities.reverse.each do |activity| %>
    <div class="border border-2 border-indigo-900 mb-3 p-5">
      <span class="text-xl mb-3"><%= activity.description %></span>

      <div class="text-xs mt-3">
        <em><%= activity.date.strftime("%a, %e %b %Y") %> -
          <span class="text-md leading-3 text-orange-900 inline">
            <%= activity.activity_type %>
          </span>
          <span class="text-indigo-900 ml-5"><%= activity.reps %>x</span>
        </em>
        <%= link_to "edit", edit_skill_activity_path(skill, activity), class: "float-right hover:font-bold" %>
      </div>
    </div>
    <% end %>
  </div>
  <br>




  <% if skill.media.present? %>
  <div class="section mb-3">
    <h2 class="font-bold text-xl" id="media">Media</h2>
    <iframe width="420" height="315" <%# src="https://www.youtube.com/embed/tgbNymZ7vqY"> %> </iframe> <ul>
      <li class="p-3">
        <a href="" class="text-blue-500 underline hover:text-black text-lg">Roger Gracie demonstrates move
          (youtube.com)</a>
      </li>
      <li class="p-3">
        <a href="" class="text-blue-500 underline hover:text-black text-lg">Simple demo (youtube.com)</a>
      </li>
      </ul>

  </div>
  <% end %>

<!-- 
TODO - add related skills field
  <h2 class="font-bold text-xl mb-3">Related Skills</h2>
  <span class="p-3"><a href=""
      class="text-indigo-700 bg-indigo-100 hover:text-indigo-100 hover:bg-indigo-700 rounded-full mb-3 py-2 px-4 text-lg whitespace-nowrap">Kimura
      from Mount</a></span>
  <span class="p-3"><a href=""
      class="text-indigo-700 bg-indigo-100 hover:text-indigo-100 hover:bg-indigo-700 rounded-full mb-3 py-2 px-4 text-lg whitespace-nowrap">Triangle
      from Mount</a></span>
-->

<!--
TODO: add a quick practice button
  <a href="#" class="btn-primary">Marked as practiced today</a>
-->

<%#= TODO: render "activities/form", :activity => @activity, :skill => @skill %>

  <% end %>
</div>
