<div id="<%= dom_id skill%>" class="<%= action_name != "show" ? "w-full md:w-[48%] lg:w-[30%] cursor-pointer" : "" %>">
  <% if action_name != "show" %>
  <div class="flex flex-row flex-wrap items-center justify-center w-full">
    <div class="w-full mb-3 bg-white border border-black shadow focus:outline-none hover:bg-indigo-100">
      <div id="card-content" class="relative p-6">
      <% cache skill do %>
            <%= content_tag :span, "#{skill.total_reps}x", 
            class: "text-indigo-200 rounded-full
            bg-gradient-to-r from-indigo-500 to-indigo-900 flex items-center 
            justify-center h-10 w-10 p-8 absolute -top-2 -right-2" %>
      <% end %>
        <div class="flex items-center">
          <%# <img src="https://cdn.tuk.dev/assets/components/misc/doge-coin.png" alt="coin avatar" class="w-12 h-12 rounded-full" /> %>
          <div class="flex items-start justify-between w-full">
            <div class="w-full pr-8">
              <span><%= link_to skill.name, skill, class: "focus:outline-none text-xl font-medium leading-5 text-gray-800 hover:underline" %></span>

              <p class="pt-2 text-sm leading-normal text-gray-500 focus:outline-none">
                <%=  !skill.activities.empty? ? "Last done: #{skill.activities.last.date.strftime("%a, %e %b %Y")}" : 'New Skill' %>
              </p>
              <p class="pt-2 text-sm leading-normal text-gray-500 focus:outline-none">
                <%= "Last rated: #{skill.activities.last.rating}" unless skill.activities.empty? %>
              </p>
            </div>


          </div>
        </div>
        <div class="overflow-hidden" id="notes">
          <!--
          <p class="pt-2 text-sm text-gray-600 whitespace-pre-wrap focus:outline-none">
            <%= skill.notes %>
          </p>
  -->
          <div class="mt-3 focus:outline-none" id="tags">
            <% if skill.tags.present? 
                            skill.tags.split(", ").each do |tag|%>
            <div class="text-xs inline-block
            mr-2 px-2 py-0.5 rounded-lg
            text-indigo-900 border border-indigo-900
            hover:text-white cursor-pointer
            hover:bg-gradient-to-r hover:from-indigo-500 hover:to-indigo-900">
              <%= tag %></div>
            <% end %>
            <% end %>
          </div>
        </div>
      </div>

      <div id="buttons" class="flex justify-between w-full px-6 py-2 text-xs border border-t border-b border-gray-200 rounded-b border-t-indigo-700">
        <div class="">
          <%= link_to edit_skill_path(skill) do %>
          <span class="text-gray-500 hover:text-gray-900"><%= fa_icon "pencil" %> edit</span>
          <% end %>
        </div>
        <div class="">
          <%= link_to edit_skill_path(skill) do %>
          <span class="text-gray-500 hover:text-gray-900"><%= fa_icon "plus" %> add to list</span>
          <% end %>
        </div>
        <div class="">
          <%= link_to new_skill_activity_path(skill) do %>
          <span class="text-gray-500 hover:text-gray-900"><%= fa_icon "book" %> log</span>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <% else %>

  <%#
### ############################################################################
### INDIVIDUAL SKILL PAGE
### ############################################################################
#%>

  <div>
    <div class="relative">
      <%= link_to edit_skill_path(@skill) do %>
      <span class="absolute z-20 text-indigo-500 hover:text-white right-20"><%= fa_icon "pencil" %> Edit</span>
      <% end %>    
    </div>
  </div>

  <%= content_tag :h1, skill.name, class: "sloped relative text-6xl block font-bold py-3 text-center bg-gradient-to-r from-indigo-500 to-indigo-900 text-white" %>

  <% if skill.tags.present? %>
  <div
    class="w-full py-2 mx-auto text-sm text-center text-white rounded-b-lg shadow-sm bg-gradient-to-r from-indigo-500 to-indigo-900"">
      <% skill.tags.split(", ").each do |tag|%>
          <%= content_tag :div, tag, class: "py-2 px-4 text-xs leading-3 inline" %>
      <% end %>
    </div>
  <% end %>


<!--
  <div class="w-full py-2 mx-auto text-sm text-center text-white bg-gray-700 shadow-sm "">
    <%=  !skill.activities.empty? ? "Last practiced: #{(Date.today - @skill.activities.last.date).to_i} days ago" : '' %>

    Stats: Rolls 20x, Competition: 3x, Drills: 54x
  </div>
  <div class="w-full py-2 mx-auto mb-4 text-sm text-center text-white bg-gray-500 shadow-sm">
    <a href="#steps">Steps</a> |
    <a href="#media">Media</a> |
    <a href="#activity-log">Activity Log</a>
  </div>
  -->
  
  <% if skill.reason.present? %>
    <div class="mt-3">
      <h2 class="text-xl font-bold">Reason</h2>
      <%= content_tag :p, skill.reason, class: 'whitespace-pre-wrap' %>
      <br>
    </div>
  <% end %>

  <div class="mt-3">
    <h2 class="text-xl font-bold">Notes</h2>
    <%= content_tag :p, skill.notes, class: 'trix-content whitespace-pre-wrap' %>
    <br>
  </div>

  <div class="mt-3">
    <% if !skill.steps.blank? %>
    <h2 class="mb-3 text-xl font-bold" id="steps">Steps</h2>
    <div id="steps" class="p-2 pt-0 pl-0 bg-white border-2 border-indigo-900 divide-y divide-solid">
      <% skill.steps.split("\n").reject(&:blank?).each_with_index do |step, index| %>
      <div class="flex items-center border-black step border-b-1"
        onclick='this.style.color = "grey"; this.style.textDecoration = "line-through"'>
        <span class="flex items-center justify-center w-10 h-10 mt-4 ml-4 text-white rounded-full bg-purple-gradient">
          <%= index +1 %>
        </span>
        <span class="w-5/6 py-3 ml-4 text-2xl leading-relaxed cursor-pointer"><%= step %></span>
      </div>
      <% end %>
    </div>
    <%# <% else %>
    <%# link_to 'No steps for this skill yet.', edit_skill_path(@skill), class: "text-center" %>
    <% end %>
  </div>





  <div class="mt-5 mb-3">
    <h2 class="inline-block mb-3 text-xl font-bold" id="activity-log">Activity Log (<%= skill.activities.count %>)</h2>
    <%= link_to 'Log A Session', new_skill_activity_path(skill), 
      class: "inline-flex items-center btn-primary float-right" %>
  </div>

  <div>
    <% skill.activities.reverse.each do |activity| %>
    <div class="p-5 mb-3 border border-2 border-indigo-900">
      <span class="mb-3 text-xl"><%= activity.description %></span>

      <div class="mt-3 text-xs">
        <em><%= activity.date.strftime("%a, %e %b %Y") %> -
          <span class="inline text-orange-900 leading-3 text-md">
            <%= activity.activity_type %>
          </span>
          <span class="ml-5 text-indigo-900"><%= activity.reps %>x</span>
        </em>
        <%= link_to "edit", edit_skill_activity_path(skill, activity), class: "float-right hover:font-bold" %>
      </div>
    </div>
    <% end %>
  </div>
  <br>




  <% if skill.media.present? %>
  <div class="mb-3 section">
    <h2 class="text-xl font-bold" id="media">Media</h2>
    <iframe width="420" height="315" <%# src="https://www.youtube.com/embed/tgbNymZ7vqY"> %> </iframe> <ul>
      <li class="p-3">
        <a href="" class="text-lg text-blue-500 underline hover:text-black">Roger Gracie demonstrates move
          (youtube.com)</a>
      </li>
      <li class="p-3">
        <a href="" class="text-lg text-blue-500 underline hover:text-black">Simple demo (youtube.com)</a>
      </li>
      </ul>

  </div>
  <% end %>

<!-- 
TODO - add related skills field
  <h2 class="mb-3 text-xl font-bold">Related Skills</h2>
  <span class="p-3"><a href=""
      class="px-4 py-2 mb-3 text-lg text-indigo-700 bg-indigo-100 rounded-full hover:text-indigo-100 hover:bg-indigo-700 whitespace-nowrap">Kimura
      from Mount</a></span>
  <span class="p-3"><a href=""
      class="px-4 py-2 mb-3 text-lg text-indigo-700 bg-indigo-100 rounded-full hover:text-indigo-100 hover:bg-indigo-700 whitespace-nowrap">Triangle
      from Mount</a></span>
-->

<!--
TODO: add a quick practice button
  <a href="#" class="btn-primary">Marked as practiced today</a>
-->

<%#= TODO: render "activities/form", :activity => @activity, :skill => @skill %>

  <% end %>
</div>
